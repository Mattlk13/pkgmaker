---
title: Overview of Utilities in the pkgmaker Package
author: "Renaud Gaujoux"
date: "Version `r utils::packageVersion('pkgmaker')` - `r format(Sys.Date(), '%d %B, %Y')`"
output:
  BiocStyle::pdf_document:
    number_sections: true
  vignette: >
    %\VignetteIndexEntry{Overview of Utilities in the pkgmaker Package}
    %\VignetteKeyword{package}
    %\VignetteDepends{knitr,bibtex}
    %\VignetteEngine{knitr::rmarkdown}
    %\SweaveUTF8
    \usepackage[utf8](inputenc)
header-includes:
  - \input{"`r pkgmaker::make_vignette_auxfiles('pkgmaker')`"}
bibliography: library.bib
---

```{r pkgmaker_preamble, eval = FALSE, message = FALSE, echo=FALSE, results='asis'}
library(pkgmaker)
pkgmaker::latex_preamble()
```

% \nocite{Rpackage:NMF, Rpackage:knitr, Rpackage:applyBy}
% @Rpackage_NMF @Rpackage_knitr, [-@Rpackage_knitr], @Rpackage_applyBy

# Knitr hooks

## hook\_try: showing error message in try statements

This hooks aims at showing the error message generated by `try`
blocks, which are otherwise not shown in the generated document.

### Hook registration {-}
```{r hook_try}
library(knitr)
knit_hooks$set(try = pkgmaker::hook_try)
```

### Usage {-}
```{r without_try}
try( stop('this error will not appear in the document'))
```

Using chunk option `try = TRUE`, the error message is shown in the
document:
```{r with_try, try = NA}
txt <- 'this error will be shown'
try( stop(txt) )
```

Note that by default, the error message is not highlighted by `knitr` as an
error but only as a normal message.
This is because highlighting apparently relies on an actual error signal
condition being raised, which in turn makes the package building process `R CMD build` fail.
However, it is still possible to hightlight the error when generating a document
outside a package, by using the chunk option `try = FALSE`:

```{r with_try_highlight, try = TRUE}
txt <- 'this error will be shown'
try( stop(txt) )
```


\pagebreak 

# Session Info
```{r sessionInfo, echo=FALSE, results='asis'}
toLatex(sessionInfo())
```
