<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Package Check Utils — isCRANcheck • pkgmaker</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Package Check Utils — isCRANcheck" />
<meta property="og:description" content="isCRANcheck tries to identify if one is running CRAN-like checks." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pkgmaker</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.32.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/renozao/pkgmaker/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Package Check Utils</h1>
    <small class="dont-index">Source: <a href='https://github.com/renozao/pkgmaker/blob/master/R/packages.R'><code>R/packages.R</code></a></small>
    <div class="hidden name"><code>isCRANcheck.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>isCRANcheck</code> <strong>tries</strong> to identify if one is running CRAN-like checks.</p>
    </div>

    <pre class="usage"><span class='fu'>isCRANcheck</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span>

<span class='fu'>isCRAN_timing</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>isCHECK</span><span class='op'>(</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>each argument specifies a set of tests to do using an AND operator.
The final result tests if any of the test set is true.
Possible values are:</p><dl>
<dt><code>'timing'</code></dt><dd><p>Check if the environment variable <code>_R_CHECK_TIMINGS_</code> is set,
as with the flag <code>'--timing'</code> was set.</p></dd>
<dt><code>'cran'</code></dt><dd><p>Check if the environment variable <code>_R_CHECK_CRAN_INCOMING_</code> is set,
as with the flag <code>'--as-cran'</code> was set.</p></dd>

</dl></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently <code>isCRANcheck</code> returns <code>TRUE</code> if the check is run with
either environment variable <code>_R_CHECK_TIMINGS_</code> (as set by flag <code>'--timings'</code>)
or <code>_R_CHECK_CRAN_INCOMINGS_</code> (as set by flag <code>'--as-cran'</code>).</p>
<p><strong>Warning:</strong> the checks performed on CRAN check machines are on purpose not always
run with such flags, so that users cannot effectively "trick" the checks.
As a result, there is no guarantee this function effectively identifies such checks.
If really needed for honest reasons, CRAN recommends users rely on custom dedicated environment
variables to enable specific tests or examples.</p>
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>isCRAN_timing</code>: tells if one is running CRAN check with flag <code>'--timing'</code>.</p></li>
<li><p><code>isCHECK</code>: tries harder to test if running under <code>R CMD check</code>.
It will definitely identifies check runs for:</p><ul>
<li><p>unit tests that use the unified unit test framework defined by <span class="pkg">pkgmaker</span> (see <code><a href='utest.html'>utest</a></code>);</p></li>
<li><p>examples that are run with option <code>R_CHECK_RUNNING_EXAMPLES_ = TRUE</code>,
which is automatically set for man pages generated with a fork of <span class="pkg">roxygen2</span> (see <em>References</em>).</p></li>
</ul>

<p>Currently, <code>isCHECK</code> checks both CRAN expected flags, the value of environment variable
<code>_R_CHECK_RUNNING_UTESTS_</code>, and the value of option <code>R_CHECK_RUNNING_EXAMPLES_</code>.
It will return <code>TRUE</code> if any of these environment variables is set to
anything not equivalent to <code>FALSE</code>, or if the option is <code>TRUE</code>.
For example, the function <code><a href='utest.html'>utest</a></code> sets it to the name of the package
being checked (<code>_R_CHECK_RUNNING_UTESTS_=&lt;pkgname&gt;</code>),
but unit tests run as part of unit tests vignettes are run with
<code>_R_CHECK_RUNNING_UTESTS_=FALSE</code>, so that all tests are run and reported when
generating them.</p></li>
</ul>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Adapted from the function <code>CRAN</code>
in the <span class="pkg">fda</span> package.</p>
<p><a href='https://github.com/renozao/roxygen'>https://github.com/renozao/roxygen</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>isCHECK</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Renaud Gaujoux.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


